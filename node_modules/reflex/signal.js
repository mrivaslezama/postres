"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});


const Forward = (address, tag) => {
  const forward = message => address(tag(message));
  forward.to = address;
  forward.tag = tag;
  return forward;
};

if (global["reflex/address"] == null) {
  global["reflex/address"] = 0;
}

const forward = exports.forward = (address, tag) => {
  const id = address.id != null ? address.id : address.id = global["reflex/address"]++;
  const key = `reflex/address/${id}`;

  return tag[key] || (tag[key] = Forward(address, tag));
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9zaWduYWwuanMiXSwibmFtZXMiOlsiRm9yd2FyZCIsImFkZHJlc3MiLCJ0YWciLCJmb3J3YXJkIiwibWVzc2FnZSIsInRvIiwiZ2xvYmFsIiwiaWQiLCJrZXkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFJQSxNQUFNQSxVQUFVLENBQU9DLE9BQVAsRUFBNEJDLEdBQTVCLEtBQTZEO0FBQzNFLFFBQU1DLFVBQVdDLE9BQUQsSUFBZ0JILFFBQVFDLElBQUlFLE9BQUosQ0FBUixDQUFoQztBQUNBRCxVQUFRRSxFQUFSLEdBQWFKLE9BQWI7QUFDQUUsVUFBUUQsR0FBUixHQUFjQSxHQUFkO0FBQ0EsU0FBT0MsT0FBUDtBQUNELENBTEQ7O0FBT0EsSUFBSUcsT0FBTyxnQkFBUCxLQUE0QixJQUFoQyxFQUFzQztBQUNwQ0EsU0FBTyxnQkFBUCxJQUEyQixDQUEzQjtBQUNEOztBQVdNLE1BQU1ILDRCQUFVLENBQ3JCRixPQURxQixFQUVyQkMsR0FGcUIsS0FHTjtBQUdmLFFBQU1LLEtBQ0pOLFFBQVFNLEVBQVIsSUFBYyxJQUFkLEdBQXFCTixRQUFRTSxFQUE3QixHQUFtQ04sUUFBUU0sRUFBUixHQUFhRCxPQUFPLGdCQUFQLEdBRGxEO0FBRUEsUUFBTUUsTUFBTyxrQkFBaUJELEVBQUcsRUFBakM7O0FBRUEsU0FBT0wsSUFBSU0sR0FBSixNQUFhTixJQUFJTSxHQUFKLElBQVdSLFFBQVFDLE9BQVIsRUFBaUJDLEdBQWpCLENBQXhCLENBQVA7QUFDRCxDQVhNIiwiZmlsZSI6InNpZ25hbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5cbmV4cG9ydCB0eXBlIEFkZHJlc3M8YT4gPSAoaW5wdXQ6IGEpID0+IHZvaWRcblxuY29uc3QgRm9yd2FyZCA9IDxhLCBiPihhZGRyZXNzOiBBZGRyZXNzPGI+LCB0YWc6IChhOiBhKSA9PiBiKTogQWRkcmVzczxhPiA9PiB7XG4gIGNvbnN0IGZvcndhcmQgPSAobWVzc2FnZTogYSkgPT4gYWRkcmVzcyh0YWcobWVzc2FnZSkpXG4gIGZvcndhcmQudG8gPSBhZGRyZXNzXG4gIGZvcndhcmQudGFnID0gdGFnXG4gIHJldHVybiBmb3J3YXJkXG59XG5cbmlmIChnbG9iYWxbXCJyZWZsZXgvYWRkcmVzc1wiXSA9PSBudWxsKSB7XG4gIGdsb2JhbFtcInJlZmxleC9hZGRyZXNzXCJdID0gMFxufVxuXG4vLyBDcmVhdGUgYSBuZXcgYWRkcmVzcy4gVGhpcyBhZGRyZXNzIHdpbGwgdGFnIGVhY2ggbWVzc2FnZSBpdCByZWNlaXZlcyBhbmQgdGhlblxuLy8gZm9yd2FyZCBpdCBhbG9uZyB0byB0aGUgZ2l2ZW4gYWRkcmVzcy5cbi8vIEV4YW1wbGU6XG4vL1xuLy8gY29uc3QgUmVtb3ZlID0gdGFyZ2V0ID0+IHt0eXBlOiBcIlJlbW92ZVwiLCB0YXJnZXR9XG4vLyByZW1vdmVBZGRyZXNzID0gZm9yd2FyZChhZGRyZXNzLCBSZW1vdmUpXG4vL1xuLy8gQWJvdmUgZXhhbXBsZSBjcmVhdGVkIGByZW1vdmVBZGRyZXNzYCB0YWdzIGVhY2ggbWVzc2FnZSB3aXRoIGBSZW1vdmVgIHRhZ1xuLy8gYmVmb3JlIGZvcndhcmRpbmcgdGhlbSB0byBhIGdlbmVyYWwgYGFkZHJlc3NgLlxuZXhwb3J0IGNvbnN0IGZvcndhcmQgPSA8YSwgYj4oXG4gIGFkZHJlc3M6IEFkZHJlc3M8YT4sXG4gIHRhZzogKHZhbHVlOiBiKSA9PiBhXG4pOiBBZGRyZXNzPGI+ID0+IHtcbiAgLy8gR2VucmF0ZSBJRCBmb3IgZWFjaCBhZGRyZXNzIHRoYXQgaGFzIGEgZm9yd2FyZGluZyBhZGRyZXNzZXMgc28gdGhhdFxuICAvLyBmb3J3YXJkaW5nIGFkZHJlc3NlcyBjb3VsZCBiZSBjYWNoZWQgYnkgdGhhdCBpZCBhbmQgYSB0YWctaW5nIGZ1bmN0aW9uLlxuICBjb25zdCBpZCA9XG4gICAgYWRkcmVzcy5pZCAhPSBudWxsID8gYWRkcmVzcy5pZCA6IChhZGRyZXNzLmlkID0gZ2xvYmFsW1wicmVmbGV4L2FkZHJlc3NcIl0rKylcbiAgY29uc3Qga2V5ID0gYHJlZmxleC9hZGRyZXNzLyR7aWR9YFxuXG4gIHJldHVybiB0YWdba2V5XSB8fCAodGFnW2tleV0gPSBGb3J3YXJkKGFkZHJlc3MsIHRhZykpXG59XG4iXX0=